# IoT平台环境变量配置示例
# 复制此文件为 .env 并根据您的实际环境修改配置

# ==================== 基础配置 ====================
# 运行环境: development, production, test
NODE_ENV=development

# 服务端口
PORT=8000

# ==================== 数据库配置 ====================
# PostgreSQL数据库连接URL
DATABASE_URL=postgresql://iot_user:iot_password@postgres:5432/iot_platform

# ==================== Redis配置 ====================
# Redis缓存连接URL
REDIS_URL=redis://redis:6379

# ==================== MQTT配置 ====================
# MQTT消息代理连接URL (后端服务内部使用)
MQTT_BROKER_URL=mqtt://emqx:1883
# 设备端MQTT服务器地址 (可选，不设置则使用SERVER_HOST+MQTT_PORT)
# 格式: host:port 或 mqtt://host:port (会自动提取host:port部分)
MQTT_DEVICE_ENDPOINT=fountain.top:1883
# MQTT服务器端口
MQTT_PORT=1883

# ==================== JWT认证配置 ====================
# JWT密钥 - 生产环境请使用强密钥
JWT_SECRET=your-super-secret-jwt-key-here
# JWT令牌过期时间
JWT_EXPIRES_IN=7d

# ==================== CORS跨域配置 ====================
# 允许的域名列表，用逗号分隔
# 示例: http://localhost:3000,https://yourdomain.com,https://anotherdomain.com
CORS_ORIGIN=http://localhost:3000

# ==================== 服务器配置 ====================
# 服务器主机名或IP地址 (用于设备连接)
SERVER_HOST=fountain.top
# 服务器端口
SERVER_PORT=8000

# ==================== 前端配置 ====================
# 前端API基础URL（前端使用）
NEXT_PUBLIC_API_URL=
# 后端URL（用于WebSocket连接等）
NEXT_PUBLIC_BACKEND_URL=http://localhost:8000
# 前端URL（后端使用，用于WebSocket等）
FRONTEND_URL=http://localhost:3000

# ==================== 日志配置 ====================
# 日志级别: error, warn, info, debug
LOG_LEVEL=info
# 日志目录
LOG_DIR=./logs

# ==================== 速率限制配置 ====================
# 速率限制时间窗口（毫秒）
RATE_LIMIT_WINDOW_MS=900000
# 每个时间窗口内最大请求数
RATE_LIMIT_MAX_REQUESTS=100

# ==================== 文件上传配置 ====================
# 上传文件大小限制
MAX_FILE_SIZE=10MB
# 允许的文件类型
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf

# ==================== 邮件配置（可选） ====================
# SMTP服务器配置
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=noreply@yourdomain.com

# ==================== 监控配置（可选） ====================
# 健康检查间隔（毫秒）
HEALTH_CHECK_INTERVAL=30000
# 告警检查间隔（毫秒）
ALERT_CHECK_INTERVAL=60000

# ==================== 安全配置 ====================
# 密码加密轮数
BCRYPT_ROUNDS=12
# 会话超时时间（毫秒）
SESSION_TIMEOUT=1800000

# ==================== EMQX MQTT配置 ====================
# EMQX服务名称
EMQX_NAME=iot-emqx
# EMQX主机名
EMQX_HOST=iot-emqx
# EMQX Dashboard用户名
EMQX_DASHBOARD__DEFAULT_USERNAME=admin
# EMQX Dashboard密码
EMQX_DASHBOARD__DEFAULT_PASSWORD=public
# MQTT TCP监听端口
EMQX_LISTENERS__TCP__DEFAULT__BIND=0.0.0.0:1883
# MQTT WebSocket监听端口
EMQX_LISTENERS__WS__DEFAULT__BIND=0.0.0.0:8083
# MQTT WebSocket Secure监听端口
EMQX_LISTENERS__WSS__DEFAULT__BIND=0.0.0.0:8084
# HTTP API监听端口
EMQX_LISTENERS__HTTP__DEFAULT__BIND=0.0.0.0:8081
# HTTPS API监听端口
EMQX_LISTENERS__HTTPS__DEFAULT__BIND=0.0.0.0:8089

# ==================== 数据库配置（PostgreSQL） ====================
# PostgreSQL数据库名
POSTGRES_DB=iot_platform
# PostgreSQL用户名
POSTGRES_USER=iot_user
# PostgreSQL密码
POSTGRES_PASSWORD=iot_password