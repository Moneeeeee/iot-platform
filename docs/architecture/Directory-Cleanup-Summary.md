# ç›®å½•æ¸…ç†æ€»ç»“

## ğŸ§¹ æ¸…ç†å®Œæˆçš„ç›®å½•

### 1. **åˆ é™¤çš„ç©ºç›®å½•**
```
src/routes/     â†’ æ–‡ä»¶å·²ç§»è‡³ src/api/
src/utils/      â†’ æ–‡ä»¶å·²ç§»è‡³ src/common/utils/
src/models/     â†’ æ–‡ä»¶å·²ç§»è‡³ src/common/types/
src/middleware/ â†’ æ–‡ä»¶å·²ç§»è‡³ src/core/middleware/
src/services/   â†’ æ–‡ä»¶å·²ç§»è‡³ src/core/
```

### 2. **åˆå¹¶çš„é‡å¤ç›®å½•**
```
devices/        â†’ å†…å®¹å·²åˆå¹¶åˆ° backend/src/plugins/devices/
```

## ğŸ“ ä¿ç•™çš„ç›®å½•

### 1. **`uploads/` ç›®å½• - ä¿ç•™** âœ…
**ç”¨é€”**ï¼š
- æ–‡ä»¶ä¸Šä¼ å­˜å‚¨ï¼ˆç”¨æˆ·å¤´åƒã€è®¾å¤‡å›¾ç‰‡ã€æ–‡æ¡£ï¼‰
- å›ºä»¶ç®¡ç†ï¼ˆOTAå‡çº§åŒ…ã€å›ºä»¶å¤‡ä»½ï¼‰
- å¯¼å‡ºæ–‡ä»¶ï¼ˆæ•°æ®å¯¼å‡ºã€æŠ¥å‘Šç”Ÿæˆï¼‰
- ä¸´æ—¶æ–‡ä»¶å­˜å‚¨

**ç›®å½•ç»“æ„**ï¼š
```
uploads/
â”œâ”€â”€ images/          # å›¾ç‰‡æ–‡ä»¶
â”œâ”€â”€ documents/       # æ–‡æ¡£æ–‡ä»¶
â”œâ”€â”€ firmware/        # å›ºä»¶æ–‡ä»¶
â””â”€â”€ exports/         # å¯¼å‡ºæ–‡ä»¶
```

**ä»£ç å¼•ç”¨**ï¼š
```typescript
// åœ¨ app.ts å’Œ core/server.ts ä¸­
this.app.use('/uploads', express.static('uploads'));
```

### 2. **`tests/` ç›®å½• - ä¿ç•™** âœ…
**ç”¨é€”**ï¼š
- å•å…ƒæµ‹è¯•æ–‡ä»¶
- é›†æˆæµ‹è¯•æ–‡ä»¶

**å½“å‰å†…å®¹**ï¼š
- `auth.test.ts`
- `health.test.ts`

## ğŸ”„ è®¾å¤‡é…ç½®ç³»ç»Ÿç»Ÿä¸€

### é—®é¢˜
ä¹‹å‰å­˜åœ¨ä¸¤å¥—è®¾å¤‡é…ç½®ç³»ç»Ÿï¼š
1. `devices/` ç›®å½•ï¼ˆæ ¹ç›®å½•ï¼‰
2. `backend/src/plugins/devices/` ç›®å½•ï¼ˆæ’ä»¶ç³»ç»Ÿï¼‰

### è§£å†³æ–¹æ¡ˆ
- **åˆå¹¶åˆ°æ’ä»¶ç³»ç»Ÿ**ï¼šå°† `devices/powersafe/config.json` ç§»åŠ¨åˆ° `backend/src/plugins/devices/powersafe/`
- **åˆ é™¤é‡å¤ç›®å½•**ï¼šåˆ é™¤æ ¹ç›®å½•çš„ `devices/` æ–‡ä»¶å¤¹
- **ç»Ÿä¸€ç®¡ç†**ï¼šæ‰€æœ‰è®¾å¤‡é…ç½®ç°åœ¨éƒ½åœ¨æ’ä»¶ç³»ç»Ÿä¸­ç®¡ç†

### æ–°çš„è®¾å¤‡é…ç½®ç»“æ„
```
backend/src/plugins/devices/
â”œâ”€â”€ powersafe/
â”‚   â”œâ”€â”€ index.ts           # è®¾å¤‡æ’ä»¶å®ç°
â”‚   â”œâ”€â”€ config.json        # è®¾å¤‡é…ç½®ï¼ˆä» devices/ ç§»åŠ¨è¿‡æ¥ï¼‰
â”‚   â”œâ”€â”€ routes/            # è®¾å¤‡ç‰¹å®šè·¯ç”±
â”‚   â”œâ”€â”€ services/          # è®¾å¤‡ç‰¹å®šæœåŠ¡
â”‚   â””â”€â”€ config/            # è®¾å¤‡ç‰¹å®šé…ç½®
â”œâ”€â”€ smart-controller/
â”œâ”€â”€ smart-gateway/
â”œâ”€â”€ smart-sensor/
â””â”€â”€ generic/
```

## ğŸ“‹ æœ€ç»ˆç›®å½•ç»“æ„

```
/opt/iot-platform/
â”œâ”€â”€ backend/               # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/          # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ common/       # å…¬å…±å·¥å…·å’Œç±»å‹
â”‚   â”‚   â”œâ”€â”€ core/         # æ ¸å¿ƒæ¡†æ¶
â”‚   â”‚   â”œâ”€â”€ plugins/      # æ’ä»¶ç³»ç»Ÿï¼ˆåŒ…å«è®¾å¤‡é…ç½®ï¼‰
â”‚   â”‚   â”œâ”€â”€ config-center/ # é…ç½®ä¸­å¿ƒ
â”‚   â”‚   â””â”€â”€ tests/        # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ frontend/             # å‰ç«¯ä»£ç 
â”œâ”€â”€ uploads/              # æ–‡ä»¶ä¸Šä¼ å­˜å‚¨
â”œâ”€â”€ docs/                 # æ–‡æ¡£
â”œâ”€â”€ docker/               # Dockeré…ç½®
â””â”€â”€ scripts/              # è„šæœ¬æ–‡ä»¶
```

## âœ… æ¸…ç†æ•ˆæœ

1. **æ¶ˆé™¤é‡å¤** - åˆ é™¤äº†é‡å¤çš„è®¾å¤‡é…ç½®ç³»ç»Ÿ
2. **ç»“æ„æ¸…æ™°** - æ‰€æœ‰åŠŸèƒ½éƒ½æœ‰æ˜ç¡®çš„ä½ç½®
3. **æ˜“äºç»´æŠ¤** - ç»Ÿä¸€çš„ä»£ç ç»“æ„å’Œä¾èµ–ç®¡ç†
4. **åŠŸèƒ½å®Œæ•´** - ä¿ç•™äº†æ‰€æœ‰å¿…è¦çš„åŠŸèƒ½ç›®å½•

ç°åœ¨é¡¹ç›®ç»“æ„æ›´åŠ æ¸…æ™°å’Œè§„èŒƒï¼ğŸ‰
