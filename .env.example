# Fountain IoT Platform - 环境变量配置模板
# 复制此文件为 .env 并修改配置

# ==================== 通用配置 ====================
NODE_ENV=development
LOG_LEVEL=info

# ==================== 数据库配置 ====================

# PostgreSQL (主数据库)
POSTGRES_PASSWORD=iot_password_2025
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=iot_platform
POSTGRES_USER=iot_user

# TimescaleDB (时序数据库)
TIMESCALEDB_PASSWORD=iot_password_2025
TIMESCALEDB_HOST=timescaledb
TIMESCALEDB_PORT=5432
TIMESCALEDB_DB=iot_timeseries
TIMESCALEDB_USER=iot_user

# ==================== 缓存与消息队列 ====================

# Redis
REDIS_PASSWORD=redis_password_2025
REDIS_HOST=redis
REDIS_PORT=6379

# NATS
NATS_URL=nats://nats:4222

# ==================== MQTT Broker ====================

# EMQX
EMQX_ADMIN_USER=admin
EMQX_ADMIN_PASSWORD=public2025
MQTT_GATEWAY_PASSWORD=gateway_password

# EMQX API (用于动态配置)
EMQX_API_KEY=
EMQX_API_SECRET=

# ==================== 对象存储 ====================

# MinIO
MINIO_ROOT_USER=minio_admin
MINIO_ROOT_PASSWORD=minio_password_2025
MINIO_ENDPOINT=minio
MINIO_PORT=9000
MINIO_USE_SSL=false

# ==================== 认证与安全 ====================

# JWT 配置
JWT_SECRET=your_jwt_secret_change_in_production_min_32_chars
JWT_EXPIRES_IN=7200
JWT_REFRESH_EXPIRES_IN=604800

# 密钥管理 (可选，使用 Vault)
VAULT_ADDR=
VAULT_TOKEN=

# ==================== 告警通知 ====================

# 邮件 (SMTP)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@iot-platform.com

# 短信 (可选)
SMS_PROVIDER=
SMS_API_KEY=

# Webhook
WEBHOOK_TIMEOUT=5000
WEBHOOK_RETRIES=3

# ==================== 前端配置 ====================

# API 端点 (浏览器访问)
NEXT_PUBLIC_API_URL=http://localhost:8001
NEXT_PUBLIC_WS_URL=ws://localhost:8001
NEXT_PUBLIC_MQTT_WS_URL=ws://localhost:8083

# 内部服务发现 (容器间通信)
AUTH_SERVICE_URL=http://auth-service:8001
DEVICE_SERVICE_URL=http://device-service:8003
TELEMETRY_SERVICE_URL=http://telemetry-service:8004
OTA_SERVICE_URL=http://ota-service:8005

# ==================== 监控配置 ====================

# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin2025
GRAFANA_URL=http://localhost:3001

# Prometheus
PROMETHEUS_URL=http://prometheus:9090

# Loki
LOKI_URL=http://loki:3100

# ==================== 性能配置 ====================

# 批量处理
BATCH_SIZE=1000
BATCH_TIMEOUT=1000

# 连接限制
MAX_CONNECTIONS=10000

# 缓存配置
CACHE_TTL=7200

# ==================== 视频流配置 (Phase 3) ====================

VIDEO_CODEC=h265
VIDEO_BITRATE=2000000
SEGMENT_DURATION=10
MAX_STREAMS=100

# ==================== 数据分析配置 (Phase 3) ====================

ANALYTICS_INTERVAL=3600000
CLICKHOUSE_HOST=
CLICKHOUSE_PORT=
CLICKHOUSE_DB=
CLICKHOUSE_USER=
CLICKHOUSE_PASSWORD=

# ==================== 规则引擎配置 ====================

RULE_EVALUATION_INTERVAL=1000
MAX_RULES_PER_TENANT=100

# ==================== 外部服务集成 (可选) ====================

# 阿里云 OSS (替代 MinIO)
ALIYUN_OSS_ACCESS_KEY=
ALIYUN_OSS_SECRET_KEY=
ALIYUN_OSS_BUCKET=
ALIYUN_OSS_REGION=

# 腾讯云 COS
TENCENT_COS_SECRET_ID=
TENCENT_COS_SECRET_KEY=
TENCENT_COS_BUCKET=
TENCENT_COS_REGION=

# AWS S3
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_S3_BUCKET=
AWS_REGION=

# ==================== 开发工具 ====================

# 调试模式
DEBUG=false
VERBOSE_LOGGING=false

# API 限流
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=60000

# CORS 配置
CORS_ORIGIN=*
CORS_CREDENTIALS=true

# ==================== 备注 ====================
# 1. 生产环境请务必修改所有密码！
# 2. JWT_SECRET 至少 32 个字符
# 3. 不要将 .env 文件提交到 Git
# 4. 使用强密码并定期更换

