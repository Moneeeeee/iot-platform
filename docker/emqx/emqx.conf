# EMQX配置文件
# 基础配置
node.name = iot-emqx@iot-emqx
node.cookie = emqxsecretcookie

# 监听器配置
listeners.tcp.default.bind = 0.0.0.0:1883
listeners.tcp.default.max_connections = 1024000
listeners.tcp.default.max_conn_rate = 1000

# WebSocket监听器
listeners.ws.default.bind = 0.0.0.0:8083
listeners.ws.default.max_connections = 102400

# HTTP API监听器
listeners.http.default.bind = 0.0.0.0:8081
listeners.http.default.max_connections = 512

# Dashboard配置
dashboard.default_username = admin
dashboard.default_password = public
dashboard.listeners.http.bind = 0.0.0.0:18083

# 日志配置
log.level = info
log.dir = /opt/emqx/log

# 数据目录
data_dir = /opt/emqx/data

# 集群配置（单节点）
cluster.discovery = static
cluster.static.seeds = iot-emqx@iot-emqx

# 认证配置（允许匿名连接）
allow_anonymous = true

# ACL配置（允许所有主题）
acl_nomatch = allow

# 消息保留配置
retained.max_retained_messages = 1000000
retained.max_payload_size = 1MB

# 会话配置
session.max_inflight = 32
session.max_awaiting_rel = 100
session.await_rel_timeout = 300s
session.max_subscriptions = 0
session.upgrade_qos = off
session.retry_interval = 30s
session.max_retry_times = 3
